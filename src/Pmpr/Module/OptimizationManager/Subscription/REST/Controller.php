<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             6714e1b010e5b             |
    |_______________________________________|
*/
 namespace Pmpr\Module\OptimizationManager\Subscription\REST; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Module\DomainManager\Model\Domain; use Pmpr\Module\OptimizationManager\REST\Controller as BaseClass; use Pmpr\Module\OptimizationManager\Subscription\Model\Extra; use Pmpr\Module\OptimizationManager\Subscription\Model\Plan; use Pmpr\Module\OptimizationManager\Subscription\Model\Subscription; use Pmpr\Module\OptimizationManager\Subscription\Setting; use Pmpr\Module\OptimizationManager\Setting as ModuleSetting; use Pmpr\Module\OptimizationManager\Subscription\Traits\EngineTrait; use WP_Error; use WP_HTTP_Response; use WP_REST_Request; use WP_REST_Response; class Controller extends BaseClass { use EngineTrait; const oquukmukaoqegcuk = "\x75\x73\x61\147\145\x5f\151\144\163"; public function ikcgmcycisiccyuc() { parent::ikcgmcycisiccyuc(); $this->rest_base .= "\57\163\x75\x62\x73\143\x72\x69\160\164\x69\157\x6e"; } public function register_routes() { $this->register("\x2f\x61\x64\x64\55\165\x73\141\147\x65", [Constants::wwgusigoaksqmwsm => [$this, "\163\x6b\x6b\x79\163\165\x71\x71\x79\163\151\x6f\151\167\167\147"], Constants::oaggieeykyaoiiyw => self::qucyckeykeuuaquw, Constants::okeuagwgwkmiokac => [Constants::myikkigscysoykgy => [Constants::squoamkioomemiyi => "\x61\162\x72\x61\x79", Constants::eqkeooqcsscoggia => __("\101\x63\x74\151\x6f\x6e\x73", PR__MDL__OPTIMIZATION_MANAGER)], Constants::sygmkaeayiiouiwm => [Constants::squoamkioomemiyi => "\163\x74\162\x69\x6e\x67", Constants::eqkeooqcsscoggia => __("\124\157\x6b\145\156", PR__MDL__OPTIMIZATION_MANAGER)]]]); $this->register("\x2f\143\150\141\156\x67\145\55\x75\163\141\x67\145\163\55\x73\164\141\x74\x75\163", [Constants::wwgusigoaksqmwsm => [$this, "\x61\x6d\153\157\x75\x6d\161\x69\167\171\141\161\165\153\x6f\167"], Constants::oaggieeykyaoiiyw => self::ouuaeeeqeqkagcgi, Constants::okeuagwgwkmiokac => [self::oquukmukaoqegcuk => [Constants::squoamkioomemiyi => "\x61\162\162\x61\171", Constants::eqkeooqcsscoggia => __("\x55\163\x61\147\145\40\x49\x44\x73", PR__MDL__OPTIMIZATION_MANAGER)], Constants::ciywsqoeiymemsys => [Constants::squoamkioomemiyi => "\x73\x74\x72\151\156\147", Constants::eqkeooqcsscoggia => __("\125\x73\x61\147\x65\x73\40\x53\164\141\164\x75\x73", PR__MDL__OPTIMIZATION_MANAGER)], Constants::sygmkaeayiiouiwm => [Constants::squoamkioomemiyi => "\163\164\x72\151\156\x67", Constants::eqkeooqcsscoggia => __("\x54\157\x6b\145\x6e", PR__MDL__OPTIMIZATION_MANAGER)]]]); $this->register("\57\147\x65\x74\55\x70\165\x72\x63\150\141\163\145\163", [Constants::wwgusigoaksqmwsm => [$this, "\153\x73\x79\153\x75\141\171\x6b\171\171\165\x71\147\163\167\147"], Constants::okeuagwgwkmiokac => [Constants::imywcsggckkcywgk => [Constants::squoamkioomemiyi => "\x73\x74\162\151\x6e\147", Constants::eqkeooqcsscoggia => __("\x50\141\147\x65", PR__MDL__OPTIMIZATION_MANAGER)]]]); $this->register("\x2f\147\145\x74\x2d\x64\141\x74\x61", [Constants::wwgusigoaksqmwsm => [$this, "\163\x65\171\171\x69\161\x6d\x67\167\171\x6d\171\x75\155\157\x71"]]); } public function seyyiqmgwymyumoq(WP_REST_Request $aqmwamyiwgeeymqa) { $gwgucoaaqcwwciqq = $this->ogkysoamaegikmcy($aqmwamyiwgeeymqa); $esuksqieigiqcaie = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::aciemiuuwgysykom); if ($esuksqieigiqcaie && $gwgucoaaqcwwciqq) { $qwgquweoiskugckg = 0; $umwagewoweuckiso = null; $swgwkyqkakceqeia = Domain::symcgieuakksimmu(); $mokawwccycoiqeka = $swgwkyqkakceqeia->aqiwcawmimkygoau($esuksqieigiqcaie, $gwgucoaaqcwwciqq); $goqqimcssiyagkwy = $this->uykissogmuaaocsg(); if ($mokawwccycoiqeka && !is_wp_error($mokawwccycoiqeka)) { $wqykqusigegasqeg = $swgwkyqkakceqeia->mwyqswsaeeewsosm($mokawwccycoiqeka); $umwagewoweuckiso = $goqqimcssiyagkwy->mkiwiwaquqeegaik($wqykqusigegasqeg); if (!$umwagewoweuckiso) { $ekucuuaawysekyca = $goqqimcssiyagkwy->mkiwiwaquqeegaik($wqykqusigegasqeg, false); if (!$ekucuuaawysekyca) { $akqaumomesyiuiym = $goqqimcssiyagkwy->imicysmecoiycoqc(); if ($akqaumomesyiuiym) { $sogksuscggsicmac = $goqqimcssiyagkwy->subscribe($wqykqusigegasqeg, $akqaumomesyiuiym); if ($sogksuscggsicmac && !is_wp_error($sogksuscggsicmac)) { $umwagewoweuckiso = $sogksuscggsicmac; } } } } $qwgquweoiskugckg = $goqqimcssiyagkwy->xowkiecqumsskiec($wqykqusigegasqeg); } $omouioamescuegke = Plan::symcgieuakksimmu(); $omcwcsgeyeyoiwyi = Subscription::symcgieuakksimmu(); $kekgkgqeyesmkywu = $omouioamescuegke->qyaiiayimwmuomey(false); $qsqwqsymmqeoqwcu = []; $gkyciwoiiisgywcs = $this->caokeucsksukesyo()->ywqgcuymeiswqyqc(); foreach ($kekgkgqeyesmkywu as $gesuaewsacmmwoeo) { $ogaeiucyqmowuqms = $omouioamescuegke->mwyqswsaeeewsosm($gesuaewsacmmwoeo); $oggygmyiawqsyecy = $goqqimcssiyagkwy->gsmygqkksqsseoeq(); if ($oggygmyiawqsyecy) { $oggygmyiawqsyecy = $this->uwkmaywceaaaigwo()->owicscwgeuqcqaig()->yqymaqmqiqmmmsoo(["\x73\x74\x65\x70" => 4, "\164\141\162\x67\x65\164" => $ogaeiucyqmowuqms, "\157\162\144\145\x72\137\x74\171\160\145" => Constants::uswkskaqiieoyacg], $oggygmyiawqsyecy); } $gmcgeogogyqsgawk = $omouioamescuegke->asosocqswygacyyk($gesuaewsacmmwoeo); $gmcgeogogyqsgawk = [Constants::uomuwqaqggoekwwg => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Constants::uomuwqaqggoekwwg, false), Constants::mykiyeswieqamagm => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Constants::mykiyeswieqamagm), Constants::qescuiwgsyuikume => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Constants::quumookoiuysuyuw), Constants::owimkwkiwawmeicq => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Constants::owimkwkiwawmeicq), Constants::eeeyoywyquqywwoo => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Constants::eeeyoywyquqywwoo), Constants::iuqumwggccmcuyem => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Constants::iuqumwggccmcuyem), Constants::qscwcyiaqccoayqk => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Constants::qscwcyiaqccoayqk), Constants::ueasagmikqewqcay => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Constants::ueasagmikqewqcay, 0), Constants::iysgkeueasmuwmcq => $oggygmyiawqsyecy, Constants::quywusioaoakumaw => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Constants::quywusioaoakumaw), Plan::kceiayeyisgquuim => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Plan::kceiayeyisgquuim, 0), Plan::cgiaykosmmoyuagu => $gkyciwoiiisgywcs->get($gmcgeogogyqsgawk, Plan::cgiaykosmmoyuagu, 0)]; $qsqwqsymmqeoqwcu[$ogaeiucyqmowuqms] = $gmcgeogogyqsgawk; if ((int) $ogaeiucyqmowuqms === (int) $omcwcsgeyeyoiwyi->waecsyqmwascmqoa($umwagewoweuckiso, Constants::kiwgokskimawckie)) { $umwagewoweuckiso[Constants::qescuiwgsyuikume] = $gmcgeogogyqsgawk[Constants::qescuiwgsyuikume]; } } $keccaugmemegoimu = $this->qasywwyamoesisyi('', ["\143\x6f\151\156\163" => $qwgquweoiskugckg, "\x70\154\x61\156\x73" => $qsqwqsymmqeoqwcu, "\162\145\155\x6f\164\145\x5f\x61\x70\160\163" => ModuleSetting::symcgieuakksimmu()->kykwaemmssqsguqw(), "\x65\x78\164\x72\141\137\143\157\x69\156\163" => $goqqimcssiyagkwy->ycmmosmyyiycyeug(true), "\163\165\142\x73\143\x72\x69\160\164\151\x6f\x6e" => $umwagewoweuckiso]); } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(); } return $this->ewmkmmsuiuwmmwoy($keccaugmemegoimu); } public function ksykuaykyyuqgswg(WP_REST_Request $aqmwamyiwgeeymqa) { $gwgucoaaqcwwciqq = $this->ogkysoamaegikmcy($aqmwamyiwgeeymqa); $esuksqieigiqcaie = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::aciemiuuwgysykom); if ($esuksqieigiqcaie && $gwgucoaaqcwwciqq) { $swgwkyqkakceqeia = Domain::symcgieuakksimmu(); $mokawwccycoiqeka = $swgwkyqkakceqeia->aqiwcawmimkygoau($esuksqieigiqcaie, $gwgucoaaqcwwciqq); if (!is_wp_error($mokawwccycoiqeka)) { if ($mokawwccycoiqeka) { $suaemuyiacqyugsm = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::imywcsggckkcywgk, 1); $wqykqusigegasqeg = $swgwkyqkakceqeia->mwyqswsaeeewsosm($mokawwccycoiqeka); $keccaugmemegoimu = $this->qasywwyamoesisyi(__("\x59\x6f\x75\x72\x20\x52\x65\161\x75\145\x73\x74\40\151\x73\x20\x76\141\154\151\144\x2e", PR__MDL__OPTIMIZATION_MANAGER), ["\145\170\x74\162\x61\163" => $this->kiyymmqeuqucwggg(Extra::symcgieuakksimmu(), $wqykqusigegasqeg, $suaemuyiacqyugsm), "\163\165\142\x73\143\162\151\160\x74\151\157\x6e\x73" => $this->kiyymmqeuqucwggg(Subscription::symcgieuakksimmu(), $wqykqusigegasqeg, $suaemuyiacqyugsm)]); } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__("\103\141\x6e\x20\x6e\x6f\x74\x20\x64\145\x74\145\143\x74\x20\x79\x6f\165\x72\x20\144\x6f\155\141\151\156\x2e\x20\x70\154\x65\141\x73\145\40\x63\157\156\164\141\x63\x74\x20\165\163\56", PR__MDL__OPTIMIZATION_MANAGER)); } } else { $keccaugmemegoimu = $mokawwccycoiqeka; } } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(); } return $this->ewmkmmsuiuwmmwoy($keccaugmemegoimu); } public function amkoumqiwyaqukow(WP_REST_Request $aqmwamyiwgeeymqa) { $mgegoogckgsumooq = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::sygmkaeayiiouiwm); $iueymcwwscwqkiyq = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::ciywsqoeiymemsys); $yayiceymsscqcsoy = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, self::oquukmukaoqegcuk); if ($mgegoogckgsumooq && $yayiceymsscqcsoy && is_array($yayiceymsscqcsoy) && $iueymcwwscwqkiyq && in_array($iueymcwwscwqkiyq, [Constants::amcogigwsaqssuai, Constants::uasuowkaguiwoouw], true)) { if ($this->ycocqiwisouieuig($mgegoogckgsumooq)) { foreach ($yayiceymsscqcsoy as $wwcmeousycqgqwws) { $this->uykissogmuaaocsg()->ysqwckqmysqyuuow($wwcmeousycqgqwws, $iueymcwwscwqkiyq); } $keccaugmemegoimu = $this->qasywwyamoesisyi(__("\x55\x73\x61\x67\145\163\x20\163\164\x61\164\x75\163\x65\163\x20\143\150\x61\156\x67\145\x64\40\163\165\143\143\145\x73\163\146\165\x6c\x6c\171\56", PR__MDL__OPTIMIZATION_MANAGER)); } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__("\131\x6f\x75\x72\40\162\145\x71\x75\x65\163\x74\40\x69\x73\x20\x6e\157\x74\40\x76\x61\154\x69\x64\x20\x61\x6e\x64\x20\x72\145\161\165\x65\163\164\x65\x64\40\162\157\x75\164\x65\x20\144\157\x65\x73\40\156\x6f\164\x20\x65\170\x69\163\x74\163\x2e", PR__MDL__OPTIMIZATION_MANAGER), 400); } } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(); } return $this->ewmkmmsuiuwmmwoy($keccaugmemegoimu); } public function skkysuqqysioiwwg(WP_REST_Request $aqmwamyiwgeeymqa) { $mgegoogckgsumooq = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::sygmkaeayiiouiwm); $esuksqieigiqcaie = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::aciemiuuwgysykom); $aiamqeawckcsuaou = $this->aemeowyaecqmymas($aqmwamyiwgeeymqa, Constants::uqgcmmosieyimiku); if ($mgegoogckgsumooq && $esuksqieigiqcaie && $aiamqeawckcsuaou) { if ($this->ycocqiwisouieuig($mgegoogckgsumooq)) { $swgwkyqkakceqeia = Domain::symcgieuakksimmu(); $mokawwccycoiqeka = $swgwkyqkakceqeia->aqiwcawmimkygoau($esuksqieigiqcaie); if ($mokawwccycoiqeka && !is_wp_error($mokawwccycoiqeka)) { $goqqimcssiyagkwy = $this->uykissogmuaaocsg(); $wqykqusigegasqeg = $swgwkyqkakceqeia->mwyqswsaeeewsosm($mokawwccycoiqeka); $umwagewoweuckiso = $goqqimcssiyagkwy->mkiwiwaquqeegaik($wqykqusigegasqeg); if ($umwagewoweuckiso) { $smowyuyseuwiaiei = $goqqimcssiyagkwy->kymquygyagwwqwkm($wqykqusigegasqeg, $aiamqeawckcsuaou); if ($smowyuyseuwiaiei > 0) { if ($yayiceymsscqcsoy = $goqqimcssiyagkwy->iimacqcwqcucqcwo($wqykqusigegasqeg, $smowyuyseuwiaiei, Constants::sgoswgskyiiwkyuo)) { $keccaugmemegoimu = $this->qasywwyamoesisyi(__("\x55\x73\x61\147\x65\x73\x20\141\144\144\145\144\40\163\x75\143\x63\x65\163\x73\x66\165\154\x6c\x79\x2e", PR__MDL__OPTIMIZATION_MANAGER), [Constants::sqcsaeqsycmuiiso => $smowyuyseuwiaiei, self::oquukmukaoqegcuk => $yayiceymsscqcsoy]); } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__("\x43\x61\156\x20\x6e\x6f\164\x20\x61\144\144\x20\165\x73\141\147\x65\x20\146\x6f\x72\40\162\x65\161\165\x65\x73\x74\x65\144\x20\144\x6f\155\x61\151\x6e\56", PR__MDL__OPTIMIZATION_MANAGER), 403); } } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__("\x43\x61\156\40\x6e\157\164\x20\x63\x61\x6c\143\165\154\x61\x74\x65\40\171\x6f\x75\x72\40\x72\x65\161\165\x65\x73\x74\145\x64\40\x61\143\x74\151\157\156\x73\x20\143\x6f\151\156\x20\x61\x6d\x6f\165\156\x74\x2e", PR__MDL__OPTIMIZATION_MANAGER), 400); } } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__("\x53\x65\x65\155\163\x20\164\x68\145\40\144\157\155\141\151\156\x20\x68\141\163\40\x6e\157\40\166\141\154\x69\144\x20\x73\165\x62\x73\143\x72\151\160\164\x69\x6f\156\x2e", PR__MDL__OPTIMIZATION_MANAGER), 400); } } else { $keccaugmemegoimu = $mokawwccycoiqeka; } } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__("\x59\x6f\165\x72\x20\x72\145\161\x75\x65\163\x74\40\x69\x73\x20\x6e\x6f\x74\x20\166\x61\x6c\x69\144\x20\x61\156\144\x20\162\145\161\x75\145\163\x74\145\x64\x20\162\x6f\x75\164\x65\40\144\157\145\x73\40\156\157\164\x20\x65\x78\151\163\164\163\x2e", PR__MDL__OPTIMIZATION_MANAGER), 400); } } else { $keccaugmemegoimu = $this->caokeucsksukesyo()->euekiyuksecoccus()->cackyykusuowuiwg(); } return $this->ewmkmmsuiuwmmwoy($keccaugmemegoimu); } private function kiyymmqeuqucwggg($meywaqqsugaoeyys, $wqykqusigegasqeg, $suaemuyiacqyugsm) : array { $geeyaumoyycymeks = $meywaqqsugaoeyys instanceof Subscription; $omouioamescuegke = Plan::symcgieuakksimmu(); $ykquycoiqesuckco = Setting::symcgieuakksimmu(); $aqauykcugwiqkumq = $this->caokeucsksukesyo()->mmmcswscsiecscwg(); $umkkkaqkwugkemce = 0; if (!$geeyaumoyycymeks) { $umkkkaqkwugkemce = $ykquycoiqesuckco->giiuwsmyumqwwiyq(Setting::ysogiyumowssousm, 0); } $ymiyawysimukkoso = $meywaqqsugaoeyys->iekyeyicoyyawomk()->aeggeuqycwawueqy($meywaqqsugaoeyys->iekyeyicoyyawomk()->yassqyiieqeywoqi(Constants::kuqwimiimiqsimgo, $wqykqusigegasqeg), [Constants::imywcsggckkcywgk => $suaemuyiacqyugsm, Constants::wosqwewmqmyweqea => false]); $cyymykkuugqaugia = []; $cgceoyqmmwumqyqa = $this->uwkmaywceaaaigwo()->wikusamwomuogoau(); foreach ($ymiyawysimukkoso[Constants::qwumqqyuasyskkkc] as $igqsaukqcqscimok) { $icwicymcioeyeyek = []; $igqsaukqcqscimok = (array) $igqsaukqcqscimok; if ($geeyaumoyycymeks) { $zkoismskyqiakggu = (array) $omouioamescuegke->iekyeyicoyyawomk()->akkkoiiymmamsauc($igqsaukqcqscimok[Constants::kiwgokskimawckie] ?? 0); if ($zkoismskyqiakggu) { $umkkkaqkwugkemce = $zkoismskyqiakggu[Constants::uecoocasykucckuu] ?? 0; } $icwicymcioeyeyek["\x70\x6c\x61\156"] = $omouioamescuegke->uikgwcuascgeissw($zkoismskyqiakggu); $icwicymcioeyeyek[Constants::icymuyeowqaciyyu] = $meywaqqsugaoeyys->waecsyqmwascmqoa($igqsaukqcqscimok, Constants::icymuyeowqaciyyu); } else { $cosmgoaiwuamyesi = $meywaqqsugaoeyys->waecsyqmwascmqoa($igqsaukqcqscimok, Constants::ciyoccqkiamemcmm, 0); if ($cosmgoaiwuamyesi > 0) { $icwicymcioeyeyek[Constants::ciyoccqkiamemcmm] = $cosmgoaiwuamyesi; } } $aumscagymwyyicag = 0; if ($umkkkaqkwugkemce && ($gkkgcoiwayaccqgm = $meywaqqsugaoeyys->waecsyqmwascmqoa($igqsaukqcqscimok, Constants::awkcoioakcaougmq))) { $mgwmckosekeimqms = $this->caokeucsksukesyo()->mmmcswscsiecscwg()->wasgwsogmuquqeaa($gkkgcoiwayaccqgm); foreach ($mgwmckosekeimqms as $cawesmkieccckaae) { if ($umkkkaqkwugkemce === $aqauykcugwiqkumq->scwwywwaeuumakiq($cawesmkieccckaae)) { $aumscagymwyyicag = $cawesmkieccckaae->get_total(); } } } $cyymykkuugqaugia[] = [Constants::gouqcwikiiygyasc => $meywaqqsugaoeyys->mwyqswsaeeewsosm($igqsaukqcqscimok), Constants::kumuoysauoagaiiy => $meywaqqsugaoeyys->waecsyqmwascmqoa($igqsaukqcqscimok, Constants::CREATED_AT), Constants::uiwqcumqkgikqyue => $icwicymcioeyeyek, Constants::acymsykymkiewqsy => $cgceoyqmmwumqyqa->aumscagymwyyicag($aumscagymwyyicag)]; } return [Constants::qwumqqyuasyskkkc => $cyymykkuugqaugia, Constants::ycuusiweasqygwiw => $ymiyawysimukkoso[Constants::ycuusiweasqygwiw]]; } private function ycocqiwisouieuig($mgegoogckgsumooq) : bool { $qcaiykuysiowsimu = ModuleSetting::symcgieuakksimmu()->giiuwsmyumqwwiyq(ModuleSetting::yemcsuieyckgsyek, [], [Constants::kyyscqqmsikeuaea => Constants::sygmkaeayiiouiwm, Constants::aisguagukaewucii => Constants::ckmqoekmugkggeym, Constants::wosqwewmqmyweqea => $mgegoogckgsumooq]); return !empty($qcaiykuysiowsimu); } }
